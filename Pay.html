<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nikita Kotrelev</title>
    <link rel="icon" href="Скан 38 (1).png" type="image/png" sizes="64x64">
    <link rel="stylesheet" href="fonts.css">
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        /* Общие стили */
        body {
            margin: 0;
            padding: 0;
            font-family: 'AoboshiOne-Regular', sans-serif;
            background-color: #000;
            color: #fff;
        }

        header {
            text-align: center;
            padding: 1rem;
        }

        header h1 {
            margin: 0;
            font-size: 2rem;
        }

        nav {
            margin-top: 1rem;
        }

        nav a {
            margin: 0 1rem;
            color: #fff;
            text-decoration: none;
            font-size: 1rem;
        }

        nav a:hover {
            text-decoration: underline;
        }

        main {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
        }

        .content {
            display: flex;
            justify-content: space-between;
            gap: 2rem;
            width: 100%;
            max-width: 800px;
        }

        #shipping-info {
            flex: 1;
            background-color: #333;
            border-radius: 8px;
            padding: 1rem;
        }

        #shipping-info h3 {
            text-align: center;
            margin-bottom: 1rem;
        }

        #shipping-form {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        #shipping-form label {
            font-size: 0.9rem;
        }

        #shipping-form input {
            padding: 0.5rem;
            font-size: 0.9rem;
            border: none;
            border-radius: 4px;
            background-color: #555;
            color: #fff;
        }

        #stripe-section {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #333;
            border-radius: 8px;
            padding: 1rem;
        }

        #stripe-button-container {
            width: 100%;
        }

        @media screen and (max-width: 960px) {
            body {
                padding: 1rem;
                grid-template-areas:
                    "header"
                    "text"; 
                grid-template-rows: auto 1fr;
            }

            header {
                padding: 1.5rem;
            }

            header h1 {
                font-size: 2rem;
            }

            header .subheading {
                font-size: 1rem;
            }

            .header-nav nav {
                display: flex;
                justify-content: center;
                gap: 1rem;
            }
        }

        @media screen and (max-width: 600px) {
            header h1 {
                font-size: 1.5rem;
            }

            header .subheading {
                font-size: 0.9rem;
            }

            .header-nav a {
                font-size: 0.9rem;
            }

            .contact-info h3 {
                font-size: 1.2rem;
            }

            .contact-image img {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
<header>
    <h1><a href="index.html" style="color: inherit; text-decoration: none;">Nikita Kotrelev</a></h1>
</header>

<main>
    <h2>Корзина и Оплата</h2>
    <div id="payment-element">
        <!-- Здесь будет монтироваться платежный элемент Stripe -->
    </div>
    <button id="submit-button">Оплатить</button>

            <h3>Информация о доставке</h3>
            <form id="shipping-form">
                <label for="first-name">Имя:</label>
                <input type="text" id="first-name" name="first-name" required>

                <label for="last-name">Фамилия:</label>
                <input type="text" id="last-name" name="last-name" required>

                <label for="address">Адрес:</label>
                <input type="text" id="address" name="address" required>

                <label for="city">Город:</label>
                <input type="text" id="city" name="city" required>

                <label for="zip">ZIP код:</label>
                <input type="text" id="zip" name="zip" required>

                <label for="email">Электронная почта:</label>
                <input type="email" id="email" name="email" required>

                <label for="phone">Телефон:</label>
                <input type="text" id="phone" name="phone" required>
            </form>
        </div>
        <div id="stripe-section">
            <button id="pay-button">Оплатить через Stripe</button>

        </div>
    </div>
</main>

<script>
    // Получаем clientSecret с вашего сервера (нужно заменить на реальный запрос)
    async function fetchClientSecret() {
        const response = await fetch('/create-payment-intent', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
        });
        const data = await response.json();
        return data.clientSecret;
    }

    (async () => {
        const clientSecret = await fetchClientSecret();
        const stripe = Stripe('pk_live_51QRkF2KyBkrHk1Msu8mbuDjzBQq1q1cPnkfzTerh6xkCkEgvt0hf13n6Qqg0BHKPvO9aRXr94eA3wTLejT9lEWca00fBl7Ag6V'); // Ваш публичный ключ Stripe

        // Настройки внешнего вида
        const appearance = {
            theme: 'flat',
            variables: { colorPrimaryText: '#262626' },
        };

        // Опции для paymentElement
        const options = {
            layout: 'accordion',
        };

        // Инициализация Stripe Elements
        const elements = stripe.elements({ clientSecret, appearance });
        const paymentElement = elements.create('payment', options);

        // Монтируем элемент
        paymentElement.mount('#payment-element');

        // Обработчик кнопки для оформления платежа
        const submitButton = document.getElementById('submit-button');
        submitButton.addEventListener('click', async () => {
            const { error } = await stripe.confirmPayment({
                elements,
                confirmParams: {
                    return_url: 'https://kotrelevnikita.com/success', // URL для успешной транзакции
                },
            });

            if (error) {
                // Обработка ошибки, например, вывод сообщения пользователю
                console.error(error.message);
            }
        });
    })();
</script>
</body>
</html>
